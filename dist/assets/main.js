!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(4),t.exports=n(5)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),_base_app=__webpack_require__(2),_base_app2=_interopRequireDefault(_base_app),_helpers=__webpack_require__(3),_helpers2=_interopRequireDefault(_helpers),UP_ARROW_KEY=38,DOWN_ARROW_KEY=40,isThennable=function(t){return _.isObject(t)&&_.isFunction(t.then)},format=function(t){return _.isObject(t)||_.isArray(t)?JSON.stringify(t,void 0,2):_.isUndefined(t)?"undefined":t},Command=function(){function t(e){_classCallCheck(this,t),this.cmd=e,this._startTime=performance.now()}return _createClass(t,[{key:"elapsedTime",get:function(){return performance.now()-this._startTime}}]),t}(),CommandHistory=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"addCommand",value:function(t){this.history.push(new Command(t)),this.currentCommandIndex=this.history.length}},{key:"commandAt",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return this.history[t]}},{key:"previousCommand",value:function(){return this.currentCommandIndex>=0?this.history[--this.currentCommandIndex]:void 0}},{key:"nextCommand",value:function(){return this.currentCommandIndex<this.history.length?this.history[++this.currentCommandIndex]:void 0}}]),t}();CommandHistory.history=[],CommandHistory.currentCommandIndex=0;var log=function(){function t(t,e){console&&console.info&&(console.group&&console.group("SDK REPL App"),console.info("Eval: ",t),console.info("Result: ",e),console.groupEnd&&console.groupEnd())}function e(t,e,n){var o=this.$(".history-container");o.append(this.$('<pre class="history input">').text(t)).append(this.$('<pre class="history output">').text("> "+e).addClass(n)),o.scrollTop(o.get(0).scrollHeight)}var n=0;return function(o,r,i){var a=this,s=++n;CommandHistory.addCommand(o),isThennable(r)&&!function(){var n=void 0;r.then(function(r){var i=format(r);n=CommandHistory.commandAt(s-1),e.call(a,s+": async response ("+n.elapsedTime+"ms)",i),t(o,i)})["catch"](function(t){n=CommandHistory.commandAt(s-1),e.call(a,s+": async error ("+n.elapsedTime+"ms)",formatError(t),"error")}),o="async request - "+o}(),e.apply(this,[s+": "+o,format(r),i])}}(),formatError=function(t){return t.name+": "+t.message+"\n"+t.stack},logError=function(t,e){log.call(this,t,formatError(e),"error")},FunctionToJson,stubFunction=function(){FunctionToJson=Function.prototype.toJSON,Function.prototype.toJSON=function(){return"function"+(this.name?": "+this.name:"")}},unstubFunction=function(){Function.prototype.toJSON=FunctionToJson},logEvent=function(){var t;return function(e,n){if(console&&console.info){var o=Array.prototype.slice.call(arguments,2),r=_helpers2["default"].fmt("SDK REPL app (%@) received: '%@'",e,n);t=t||Function.prototype.bind.call(console.info,console),t.apply(console,[r].concat(o))}}}(),fakeLog=function(t){var e=this.$(".history-container"),n=format.call(this,t),o=this.$('<pre class="history output">').text(n);_.defer(function(){e.append(o),e.scrollTop(e.get(0).scrollHeight)})},App={defaultState:"testing",events:{"submit form":function submitForm(event){event.preventDefault();var oldConsole=window.console,$script=this.$(".script");stubFunction();var console={log:fakeLog.bind(this)};try{var input=$script.val().trim(),value=eval(input);if(!input)return;log.call(this,input,value)}catch(e){oldConsole.error(e),logError.call(this,input,e)}console=oldConsole,unstubFunction(),$script.val("").select()},"keydown .script":function(t){if(t.which===UP_ARROW_KEY){var e=CommandHistory.previousCommand();e&&(t.preventDefault(),this.$(".script").val(e.cmd))}else if(t.which===DOWN_ARROW_KEY){var n=CommandHistory.nextCommand();this.$(".script").val(n&&n.cmd||"")}}}};["app.created","app.activated","app.deactivated","pane.activated","pane.deactivated","app.willDestroy","*.changed","app.route.changed","modal.close","ticket.submit.start","ticket.submit.done","ticket.submit.fail","ticket.submit.always","ticket.viewers.changed","ticket.updated","ticket.save","ticket.saved","notification.repl","message.repl","window.resize","window.scroll","channel.chat.start","channel.start.end","channel.ticket.created","channel.message.received","channel.message.sent"].forEach(function(t){App.events[t]=function(){logEvent(this.currentLocation(),t,arguments)}}),exports["default"]=_base_app2["default"].extend(App)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(){}function i(t,e){var n=t.events[e];return n?_.isFunction(n)?n.bind(t):t[n].bind(t):r}function a(t){_.each(t.events,function(e,n){var o=n.split(" "),r=o[0],a=o[1],s=!!a,c=i(t,n);s?(0,u["default"])(document).on(r,a,c):t.zafClient.on(r,c)}.bind(t))}function s(t,e){this._location=e.context.location,this.zafClient=t,a(this);var n={firstLoad:!0};this.defaultState&&this.switchTo(this.defaultState,{location:this._location}),i(this,"app.created")(),i(this,"app.activated")(n,n)}Object.defineProperty(e,"__esModule",{value:!0});var c=n(10),u=o(c);s.prototype={events:{},requests:{},currentLocation:function(){return this._location},ajax:function(t){var e=this.requests[t],n=i(this,t+".done"),o=i(this,t+".fail"),r=i(this,t+".always"),a=_.isFunction(e)?e.apply(this,Array.prototype.slice.call(arguments,1)):e;return this.zafClient.request(a).then(n,o).then(r,r)},renderTemplate:function(t,e){var o=n(7)("./"+t+".hdbs");return o(e)},switchTo:function(t,e){this.$("[data-main]").html(this.renderTemplate(t,e))},$:function(){var t=Array.prototype.slice.call(arguments,0);return t.length?u["default"].apply(u["default"],arguments):(0,u["default"])("body")}},s.extend=function(t){var e=function(t,e){s.call(this,t,e)};return e.prototype=_.extend({},s.prototype,t),e},e["default"]=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={fmt:function(t,e){var n=e;if(!_.isArray(n)||arguments.length>2){n=new Array(arguments.length-1);for(var o=1,r=arguments.length;r>o;o++)n[o-1]=arguments[o]}var i=0;return t.replace(/%@([0-9]+)?/g,function(t,e){return e=e?parseInt(e,10)-1:i++,t=n[e],null===t?"(null)":void 0===t?"":_.isFunction(t.toString)?t.toString():t})}};e["default"]=n},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(1),i=o(r),a=n(9),s=o(a),c=s["default"].init();window.zafClient=c,c.on("app.registered",function(t){var e="100%";new i["default"](c,t),/_sidebar$/.test(t.context.location)&&(e="500px"),c.invoke("resize",{height:e})})},function(t,e){},function(t,e,n){var o=n(8);t.exports=(o["default"]||o).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,o,r){var i;return'<form class="'+t.escapeExpression((i=null!=(i=n.location||(null!=e?e.location:e))?i:n.helperMissing,"function"==typeof i?i.call(null!=e?e:{},{name:"location",hash:{},data:r}):i))+'">\n  <div class="history-container"></div>\n  <input type="text" class="script"></textarea>\n</form>\n'},useData:!0})},function(t,e,n){function o(t){return n(r(t))}function r(t){return i[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var i={"./testing.hdbs":6};o.keys=function(){return Object.keys(i)},o.resolve=r,t.exports=o,o.id=7},function(t,e){t.exports=Handlebars},function(t,e){t.exports=ZAFClient},function(t,e){t.exports=jQuery}]);
//# sourceMappingURL=main.js.map