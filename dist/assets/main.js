!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(4),t.exports=n(5)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),_base_app=__webpack_require__(2),_base_app2=_interopRequireDefault(_base_app),_helpers=__webpack_require__(3),_helpers2=_interopRequireDefault(_helpers),UP_ARROW_KEY=38,DOWN_ARROW_KEY=40,isThennable=function(t){return _.isObject(t)&&_.isFunction(t.then)},format=function(t){return _.isObject(t)||_.isArray(t)?JSON.stringify(t,void 0,2):_.isUndefined(t)?"undefined":t},Command=function(){function t(e){_classCallCheck(this,t),this.cmd=e,this._startTime=performance.now()}return _createClass(t,[{key:"elapsedTime",get:function(){return performance.now()-this._startTime}}]),t}(),CommandHistory=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"addCommand",value:function(t){this.history.push(new Command(t)),this.currentCommandIndex=this.history.length,this.saveHistory()}},{key:"commandAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.history[t]}},{key:"previousCommand",value:function(){if(this.currentCommandIndex>=0)return this.history[--this.currentCommandIndex]}},{key:"nextCommand",value:function(){if(this.currentCommandIndex<this.history.length)return this.history[++this.currentCommandIndex]}},{key:"loadHistory",value:function(){try{this.history=JSON.parse(localStorage.getItem("commandHistory"))||[]}catch(t){this.history=[]}this.currentCommandIndex=this.history.length}},{key:"saveHistory",value:function(){localStorage.setItem("commandHistory",JSON.stringify(this.history))}}]),t}();CommandHistory.loadHistory();var log=function(){function t(t,e){console&&console.info&&(console.group&&console.group("SDK REPL App"),console.info("Eval: ",t),console.info("Result: ",e),console.groupEnd&&console.groupEnd())}function e(t,e,n){var o=this.$(".history-container");o.append(this.$('<pre class="history input">').text(t)).append(this.$('<pre class="history output">').text("> "+e).addClass(n)),o.scrollTop(o.get(0).scrollHeight)}var n=0;return function(o,i,r){var a=this,s=++n;CommandHistory.addCommand(o),isThennable(i)&&!function(){var n=void 0;i.then(function(i){var r=format(i);n=CommandHistory.commandAt(s-1),e.call(a,s+": async response ("+n.elapsedTime+"ms)",r),t(o,r)}).catch(function(t){n=CommandHistory.commandAt(s-1),e.call(a,s+": async error ("+n.elapsedTime+"ms)",formatError(t),"error")}),o="async request - "+o}(),e.apply(this,[s+": "+o,format(i),r])}}(),formatError=function(t){return t.name+": "+t.message+"\n"+t.stack},logError=function(t,e){log.call(this,t,formatError(e),"error")},FunctionToJson,stubFunction=function(){FunctionToJson=Function.prototype.toJSON,Function.prototype.toJSON=function(){return"function"+(this.name?": "+this.name:"")}},unstubFunction=function(){Function.prototype.toJSON=FunctionToJson},logEvent=function(){var t;return function(e,n){if(console&&console.info){var o=Array.prototype.slice.call(arguments,2),i=_helpers2.default.fmt("SDK REPL app (%@) received: '%@'",e,n);t=t||Function.prototype.bind.call(console.info,console),t.apply(console,[i].concat(o))}}}(),fakeLog=function(t){var e=this.$(".history-container"),n=format.call(this,t),o=this.$('<pre class="history output">').text(n);_.defer(function(){e.append(o),e.scrollTop(e.get(0).scrollHeight)})},App={defaultState:"testing",events:{"submit form":function submitForm(event){event.preventDefault();var oldConsole=window.console,$script=this.$(".script");stubFunction();var console={log:fakeLog.bind(this)};try{var input=$script.val().trim(),value=eval(input);if(!input)return;log.call(this,input,value)}catch(t){oldConsole.error(t),logError.call(this,input,t)}console=oldConsole,unstubFunction(),$script.val("").select()},"keydown .script":function(t){if(t.which===UP_ARROW_KEY){var e=CommandHistory.previousCommand();e&&(t.preventDefault(),this.$(".script").val(e.cmd))}else if(t.which===DOWN_ARROW_KEY){var n=CommandHistory.nextCommand();this.$(".script").val(n&&n.cmd||"")}}}};["app.created","app.activated","app.deactivated","pane.activated","pane.deactivated","app.willDestroy","*.changed","app.route.changed","modal.close","ticket.submit.start","ticket.submit.done","ticket.submit.fail","ticket.submit.always","ticket.viewers.changed","ticket.updated","ticket.save","ticket.saved","notification.repl","message.repl","window.resize","window.scroll","channel.chat.start","channel.start.end","channel.ticket.created","channel.message.received","channel.message.sent"].forEach(function(t){App.events[t]=function(){logEvent(this.currentLocation(),t,arguments)}}),exports.default=_base_app2.default.extend(App)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(){}function r(t,e){var n=t.events[e];return n?_.isFunction(n)?n.bind(t):t[n].bind(t):i}function a(t){_.each(t.events,function(e,n){var o=n.split(" "),i=o[0],a=o[1],s=!!a,c=r(t,n);s?(0,u.default)(document).on(i,a,c):t.zafClient.on(i,c)}.bind(t))}function s(t,e){this._location=e.context.location,this.zafClient=t,a(this);var n={firstLoad:!0};this.defaultState&&this.switchTo(this.defaultState,{location:this._location}),r(this,"app.created")(),r(this,"app.activated")(n,n)}Object.defineProperty(e,"__esModule",{value:!0});var c=n(10),u=o(c);s.prototype={events:{},requests:{},currentLocation:function(){return this._location},ajax:function(t){var e=this.requests[t],n=r(this,t+".done"),o=r(this,t+".fail"),i=r(this,t+".always"),a=_.isFunction(e)?e.apply(this,Array.prototype.slice.call(arguments,1)):e;return this.zafClient.request(a).then(n,o).then(i,i)},renderTemplate:function(t,e){var o=n(7)("./"+t+".hdbs");return o(e)},switchTo:function(t,e){this.$("[data-main]").html(this.renderTemplate(t,e))},$:function(){var t=Array.prototype.slice.call(arguments,0);return t.length?u.default.apply(u.default,arguments):(0,u.default)("body")}},s.extend=function(t){var e=function(t,e){s.call(this,t,e)};return e.prototype=_.extend({},s.prototype,t),e},e.default=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={fmt:function(t,e){var n=e;if(!_.isArray(n)||arguments.length>2){n=new Array(arguments.length-1);for(var o=1,i=arguments.length;o<i;o++)n[o-1]=arguments[o]}var r=0;return t.replace(/%@([0-9]+)?/g,function(t,e){return e=e?parseInt(e,10)-1:r++,t=n[e],null===t?"(null)":void 0===t?"":_.isFunction(t.toString)?t.toString():t})}};e.default=n},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var i=n(1),r=o(i),a=n(9),s=o(a),c=s.default.init();window.zafClient=c,c.on("app.registered",function(t){var e="100%",n=t.context.location;new r.default(c,t),("top_bar"===n||/_sidebar$/.test(n))&&(e="500px"),c.invoke("resize",{height:e})})},function(t,e){},function(t,e,n){var o=n(8);t.exports=(o.default||o).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,o,i){var r;return'<form class="app_'+t.escapeExpression((r=null!=(r=n.location||(null!=e?e.location:e))?r:n.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"location",hash:{},data:i}):r))+'">\n  <div class="history-container"></div>\n  <input type="text" class="script" value="zafClient.context()"></input>\n</form>\n'},useData:!0})},function(t,e,n){function o(t){return n(i(t))}function i(t){return r[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var r={"./testing.hdbs":6};o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id=7},function(t,e){t.exports=Handlebars},function(t,e){t.exports=ZAFClient},function(t,e){t.exports=jQuery}]);
//# sourceMappingURL=main.js.map